<div class="wrapper">
  <div cdkDropListGroup fxLayout="row" style="padding: 20px">
    <div class="tasks-tab-row member-1">
      {{ rowAndTasks?.priority }}
    </div>

    <div class="tasks-tab">
      <div
        cdkDropList
        [cdkDropListData]="backlog"
        class="tasks-tab"
        (cdkDropListDropped)="drop($event, 'Backlog')"
      >
        <div
          class="task"
          [style.borderBottom]="setBorderBottomColor(item.color)"
          *ngFor="let item of backlog"
          cdkDrag
          [style.backgroundColor]="setBackgroundColor(item.color)"
          [cdkDragDisabled]="item.blocked"
        >
          <span class="block-icon material-icons" *ngIf="item.blocked"
            >report</span
          >
          <div class="navigation-items">
            <span
              class="edit-icon material-icons"
              (click)="editTaskDialog(item.id)"
              >create</span
            >
            <span class="delete-icon material-icons" (click)="delTask(item.id)"
              >delete</span
            >
          </div>
          <div class="task-title">
            {{ item.title }}
          </div>
          <div class="task-description">
            {{ item.description }}
          </div>
          <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
            <div *ngFor="let user of item.userList">
              <div
                *ngIf="user?.name"
                class="owner-icon"
                [style.backgroundColor]="setOwnerIconColor(item.color)"
              >
                <div class="owner">
                  {{ user.name | uppercase | slice: 0:2 }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tasks-tab">
      <div
        cdkDropList
        [cdkDropListData]="next"
        class="tasks-tab"
        (cdkDropListDropped)="drop($event, 'Next')"
      >
        <div
          class="task"
          [style.borderBottom]="setBorderBottomColor(item.color)"
          *ngFor="let item of next"
          cdkDrag
          [style.backgroundColor]="setBackgroundColor(item.color)"
          [style.borderTop]="
            isNextExceeded(item.userList) ? '4px solid red' : 'none'
          "
          [cdkDragDisabled]="item.blocked"
        >
          <span class="block-icon material-icons" *ngIf="item.blocked"
            >report</span
          >
          <div class="navigation-items">
            <span
              class="edit-icon material-icons"
              (click)="editTaskDialog(item.id)"
              >create</span
            >
            <span class="delete-icon material-icons" (click)="delTask(item.id)"
              >delete</span
            >
          </div>
          <div class="task-title">
            {{ item.title }}
          </div>
          <div class="task-description">
            {{ item.description }}
          </div>
          <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
            <div *ngFor="let user of item.userList">
              <div
                *ngIf="user?.name"
                class="owner-icon"
                [style.backgroundColor]="setOwnerIconColor(item.color)"
              >
                <div class="owner">
                  {{ user.name | uppercase | slice: 0:2 }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tasks-tab-p">
      <div style="display: flex; height: 100%" fxLayout="row">
        <div
          fxFlex="20"
          cdkDropList
          [cdkDropListData]="inProgress1"
          class="tasks-tab-content"
          (cdkDropListDropped)="drop($event, 'InProgress', 1)"
        >
          <div
            class="task-p"
            [style.borderBottom]="setBorderBottomColor(item.color)"
            *ngFor="let item of inProgress1"
            cdkDrag
            [style.backgroundColor]="setBackgroundColor(item.color)"
            [style.borderTop]="
              isInProgressExceeded(item.userList) ? '4px solid red' : 'none'
            "
            [cdkDragDisabled]="item.blocked"
          >
            <span class="block-icon material-icons" *ngIf="item.blocked"
              >report</span
            >
            <div class="navigation-items">
              <span
                class="edit-icon material-icons"
                (click)="editTaskDialog(item.id)"
                >create</span
              >
              <span
                class="delete-icon material-icons"
                (click)="delTask(item.id)"
                >delete</span
              >
            </div>
            <div class="task-title">
              {{ item.title }}
            </div>
            <div class="task-description">
              {{ item.description }}
            </div>
            <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
              <div *ngFor="let user of item.userList">
                <div
                  *ngIf="user?.name"
                  class="owner-icon"
                  [style.backgroundColor]="setOwnerIconColor(item.color)"
                >
                  <div class="owner">
                    {{ user.name | uppercase | slice: 0:2 }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          fxFlex="20"
          cdkDropList
          [cdkDropListData]="inProgress2"
          class="tasks-tab-content"
          (cdkDropListDropped)="drop($event, 'InProgress', 2)"
        >
          <div
            class="task-p"
            [style.borderBottom]="setBorderBottomColor(item.color)"
            *ngFor="let item of inProgress2"
            cdkDrag
            [style.backgroundColor]="setBackgroundColor(item.color)"
            [style.borderTop]="
              isInProgressExceeded(item.userList) ? '4px solid red' : 'none'
            "
            [cdkDragDisabled]="item.blocked"
          >
            <span class="block-icon material-icons" *ngIf="item.blocked"
              >report</span
            >
            <div class="navigation-items">
              <span
                class="edit-icon material-icons"
                (click)="editTaskDialog(item.id)"
                >create</span
              >
              <span
                class="delete-icon material-icons"
                (click)="delTask(item.id)"
                >delete</span
              >
            </div>
            <div class="task-title">
              {{ item.title }}
            </div>
            <div class="task-description">
              {{ item.description }}
            </div>
            <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
              <div *ngFor="let user of item.userList">
                <div
                  *ngIf="user?.name"
                  class="owner-icon"
                  [style.backgroundColor]="setOwnerIconColor(item.color)"
                >
                  <div class="owner">
                    {{ user.name | uppercase | slice: 0:2 }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          fxFlex="20"
          cdkDropList
          [cdkDropListData]="inProgress3"
          class="tasks-tab-content"
          (cdkDropListDropped)="drop($event, 'InProgress', 3)"
        >
          <div
            class="task-p"
            [style.borderBottom]="setBorderBottomColor(item.color)"
            *ngFor="let item of inProgress3"
            cdkDrag
            [style.backgroundColor]="setBackgroundColor(item.color)"
            [style.borderTop]="
              isInProgressExceeded(item.userList) ? '4px solid red' : 'none'
            "
            [cdkDragDisabled]="item.blocked"
          >
            <span class="block-icon material-icons" *ngIf="item.blocked"
              >report</span
            >
            <div class="navigation-items">
              <span
                class="edit-icon material-icons"
                (click)="editTaskDialog(item.id)"
                >create</span
              >
              <span
                class="delete-icon material-icons"
                (click)="delTask(item.id)"
                >delete</span
              >
            </div>
            <div class="task-title">
              {{ item.title }}
            </div>
            <div class="task-description">
              {{ item.description }}
            </div>
            <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
              <div *ngFor="let user of item.userList">
                <div
                  *ngIf="user?.name"
                  class="owner-icon"
                  [style.backgroundColor]="setOwnerIconColor(item.color)"
                >
                  <div class="owner">
                    {{ user.name | uppercase | slice: 0:2 }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          fxFlex="20"
          cdkDropList
          [cdkDropListData]="inProgress4"
          class="tasks-tab-content"
          (cdkDropListDropped)="drop($event, 'InProgress', 4)"
        >
          <div
            class="task-p"
            [style.borderBottom]="setBorderBottomColor(item.color)"
            *ngFor="let item of inProgress4"
            cdkDrag
            [style.backgroundColor]="setBackgroundColor(item.color)"
            [style.borderTop]="
              isInProgressExceeded(item.userList) ? '4px solid red' : 'none'
            "
            [cdkDragDisabled]="item.blocked"
          >
            <span class="block-icon material-icons" *ngIf="item.blocked"
              >report</span
            >
            <div class="navigation-items">
              <span
                class="edit-icon material-icons"
                (click)="editTaskDialog(item.id)"
                >create</span
              >
              <span
                class="delete-icon material-icons"
                (click)="delTask(item.id)"
                >delete</span
              >
            </div>
            <div class="task-title">
              {{ item.title }}
            </div>
            <div class="task-description">
              {{ item.description }}
            </div>
            <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
              <div *ngFor="let user of item.userList">
                <div
                  *ngIf="user?.name"
                  class="owner-icon"
                  [style.backgroundColor]="setOwnerIconColor(item.color)"
                >
                  <div class="owner">
                    {{ user.name | uppercase | slice: 0:2 }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          fxFlex="20"
          cdkDropList
          [cdkDropListData]="inProgress5"
          class="tasks-tab-content"
          (cdkDropListDropped)="drop($event, 'InProgress', 5)"
        >
          <div
            class="task-p"
            [style.borderBottom]="setBorderBottomColor(item.color)"
            *ngFor="let item of inProgress5"
            cdkDrag
            [style.backgroundColor]="setBackgroundColor(item.color)"
            [style.borderTop]="
              isInProgressExceeded(item.userList) ? '4px solid red' : 'none'
            "
            [cdkDragDisabled]="item.blocked"
          >
            <span class="block-icon material-icons" *ngIf="item.blocked"
              >report</span
            >
            <div class="navigation-items">
              <span
                class="edit-icon material-icons"
                (click)="editTaskDialog(item.id)"
                >create</span
              >
              <span
                class="delete-icon material-icons"
                (click)="delTask(item.id)"
                >delete</span
              >
            </div>
            <div class="task-title">
              {{ item.title }}
            </div>
            <div class="task-description">
              {{ item.description }}
            </div>
            <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
              <div *ngFor="let user of item.userList">
                <div
                  *ngIf="user?.name"
                  class="owner-icon"
                  [style.backgroundColor]="setOwnerIconColor(item.color)"
                >
                  <div class="owner">
                    {{ user.name | uppercase | slice: 0:2 }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tasks-tab">
      <div
        cdkDropList
        [cdkDropListData]="done"
        class="tasks-tab"
        (cdkDropListDropped)="drop($event, 'Done')"
      >
        <div
          class="task"
          [style.borderBottom]="setBorderBottomColor(item.color)"
          *ngFor="let item of done"
          cdkDrag
          [style.backgroundColor]="setBackgroundColor(item.color)"
          [cdkDragDisabled]="item.blocked"
        >
          <span class="block-icon material-icons" *ngIf="item.blocked"
            >report</span
          >
          <div class="navigation-items">
            <span
              class="edit-icon material-icons"
              (click)="editTaskDialog(item.id)"
              >create</span
            >
            <span class="delete-icon material-icons" (click)="delTask(item.id)"
              >delete</span
            >
          </div>
          <div class="task-title">
            {{ item.title }}
          </div>
          <div class="task-description">
            {{ item.description }}
          </div>
          <div *ngIf="item.userList.length > 0" class="owner-icon-wrapper">
            <div *ngFor="let user of item.userList">
              <div
                *ngIf="user?.name"
                class="owner-icon"
                [style.backgroundColor]="setOwnerIconColor(item.color)"
              >
                <div class="owner">
                  {{ user.name | uppercase | slice: 0:2 }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
