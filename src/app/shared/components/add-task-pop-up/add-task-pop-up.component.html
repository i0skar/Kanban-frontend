<div class="example-container">
  <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
    <div fxLayout="row" fxLayoutGap="28px">
      <div fxFlex="50" class="border-task">
        <mat-form-field appearance="fill" style="display: block">
          <mat-label>Tytuł</mat-label>
          <input matInput formControlName="title" type="text" required />
        </mat-form-field>
        <mat-form-field appearance="fill" style="display: block">
          <mat-label>Opis</mat-label>
          <textarea
            matInput
            formControlName="description"
            type="text"
            rows="10"
          >
          </textarea>
        </mat-form-field>
        <div fxLayout="row" fxLayoutGap="28px">
          <div fxFlex="50" fxLayout="column">
            <mat-form-field appearance="fill">
              <mat-label>Przypisz do</mat-label>
              <mat-select [(value)]="selectedUser1">
                <mat-option [value]="none">brak</mat-option>
                <mat-option
                  *ngFor="let user of users"
                  [value]="user.name + ' ' + user.surname"
                  >{{ user.name }} {{ user.surname }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Przypisz do</mat-label>
              <mat-select [(value)]="selectedUser2">
                <mat-option [value]="none">brak</mat-option>
                <mat-option
                  *ngFor="let user of users"
                  [value]="user.name + ' ' + user.surname"
                  >{{ user.name }} {{ user.surname }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Przypisz do</mat-label>
              <mat-select [(value)]="selectedUser3">
                <mat-option [value]="none">brak</mat-option>
                <mat-option
                  *ngFor="let user of users"
                  [value]="user.name + ' ' + user.surname"
                  >{{ user.name }} {{ user.surname }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
          <div fxFlex="50" fxLayout="column">
            <mat-form-field appearance="fill" *ngIf="!editMode">
              <mat-label>Priorytet</mat-label>
              <mat-select formControlName="selectedRow" required>
                <mat-option *ngFor="let row of rows" [value]="row">{{
                  row
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Kolor</mat-label>
              <mat-select [(value)]="selectedColor">
                <mat-option [value]="none">Biały</mat-option>
                <mat-option
                  *ngFor="let color of colors"
                  [value]="color.value"
                  >{{ color.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-checkbox formControlName="block" color="primary"
              >Zablokowany</mat-checkbox
            >
          </div>
        </div>
      </div>

      <div fxFlex="50" class="border-subtask">
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <div class="label-subtasks">Podzadania</div>
          <div class="new-subtask-button">
            <span
              class="material-icons"
              matTooltip="Dodaj podzadanie"
              (click)="onAddSubtask()"
              style="color: #673ab7"
              >add_box</span
            >
          </div>
        </div>
        <div fxLayout="column">
          <div
            fxLayout="row"
            fxLayoutAlign=" center"
            *ngFor="let subtask of subtasks"
          >
            <mat-checkbox
              fxFlex="95"
              [(ngModel)]="subtask.completionStatus"
              [ngModelOptions]="{ standalone: true }"
              class="single-subtask"
              color="primary"
              >{{ subtask.description }}</mat-checkbox
            >
            <span
              fxFlex="5"
              class="material-icons delete"
              (click)="onDeleteSubtask(subtask)"
              >clear</span
            >
          </div>
        </div>
      </div>
    </div>
    <div
      fxLayout="row"
      fxLayoutGap="10px"
      style="float: right; margin-top: 26px; justify-content: flex-end"
    >
      <button mat-flat-button mat-dialog-close color="warn">Anuluj</button>
      <button
        [disabled]="taskForm.status === 'INVALID'"
        mat-flat-button
        type="submit"
        color="primary"
      >
        {{ editMode ? "Edytuj" : "+ Dodaj" }}
      </button>
    </div>
  </form>
</div>
